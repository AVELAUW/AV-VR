<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Laser input UI</title>
    <meta name="description" content="Full Stack Extended Reality Development">

    <!-- replace ? below in `aframe-master.js` -->
    <script src="aframe-master.js"></script>

    <!-- replace ? with `https://unpkg.com/aframe-environment-component@1.3.4/dist/aframe-environment-component.min.js` -->
    <script src="https://unpkg.com/aframe-environment-component@1.3.4/dist/aframe-environment-component.min.js"></script>

    <!-- replace ? with `info-message.js` -->
    <script src="info-message.js"></script>

    <!-- replace ? with `highlight.js` -->
    <script src="highlight.js"></script>

    <!-- replace ? with `info-panel.js` -->
    <script src="info-panel.js"></script>

    <!-- replace ? with `aabb-collider.js` -->
    <script src="aabb-collider.js"></script>

    <!-- replace ? with `grab.js` -->
    <script src="grab.js"></script>

    <!-- replace ? with `https://unpkg.com/aframe-environment-component@1.3.4/dist/aframe-environment-component.min.js` -->
    <script src="https://unpkg.com/aframe-environment-component@1.3.4/dist/aframe-environment-component.min.js"></script>

    <!-- replace ? with `https://cdn.jsdelivr.net/npm/mind-ar@1.2.0/dist/mindar-image.prod.js` -->
    <script src="https://cdn.jsdelivr.net/npm/mind-ar@1.2.0/dist/mindar-image.prod.js"></script>

    <!-- replace ? with `https://cdn.jsdelivr.net/npm/mind-ar@1.2.0/dist/mindar-image-aframe.prod.js` -->
    <script src="https://cdn.jsdelivr.net/npm/mind-ar@1.2.0/dist/mindar-image-aframe.prod.js"></script>

    <!-- replace ? with `https://unpkg.com/aframe-hand-controls@1.0.0/dist/aframe-hand-controls.min.js` -->
    <script src="https://unpkg.com/aframe-hand-controls@1.0.0/dist/aframe-hand-controls.min.js"></script>

    <!-- replace ? with `https://unpkg.com/super-hands@3.0.1/dist/super-hands.min.js` -->
    <script src="https://unpkg.com/super-hands@3.0.1/dist/super-hands.min.js"></script>

  </head>

  <body>
    <a-scene
      background="color: #212"
      environment
      cursor="rayOrigin: mouse; fuse: false"
      raycaster="objects: .raycastable, .AVELAFitBit"
      info-message="htmlSrc: #messageText"
      renderer="colorManagement: true"
      mindar-image-system="anchorOptions: alphaRange: 0.3; resourcesFile: resources.json; maxTrack: 2; handTrackingEnabled: true; handTrackingVersion: 1;"
    >

      <a-assets renderer="colorManagement: true;">
        <a-asset-item id="polyModel" src="poly.glb"></a-asset-item>

        <!-- Replace mixin id ? with `AVELAFitBit` -->
        <!-- Replace gltf-model ? with #polyModel -->
        <a-mixin id="AVELAFitBit"
          event-set__grab="material.color: #FFEF4F"
          event-set__grabend="material.color: #F2E646"
          event-set__hit="material.color: #F2E646"
          event-set__hitend="material.color: #EF2D5E"
          event-set__mousedown="material.color: #FFEF4F"
          event-set__mouseenter="material.color: #F2E646"
          event-set__mouseleave="material.color: #EF2D5E"
          event-set__mouseup="material.color: #F2E646"
          gltf-model="#polyModel"
          super-hands-collider-scale-grab="maxScale: 5 5 5; minScale: 0.1 0.1 0.1"
          material="color: #EF2D5E"
        ></a-mixin>

      </a-assets>

      <!-- Replace mixin ? with `AVELAFitBit` -->
      <!-- Replace scale ? with `1 1 1` -->
      <a-entity class="AVELAFitBit" mixin="AVELAFitBit" position="0 1.453 -0.395" scale="1 1 1" rotation="0 90 0"></a-entity>

      <a-assets>
        <a-asset-item id="messageText" src="message.html"></a-asset-item>

        <!-- AR -->
        <!-- Replace src ? with URL of `AR png` -->
        <!-- Replace kazetachinuPoster ? with URL of `bitmoji snapshot` -->
        <img id="kazetachinu" src="AR Pic.png" crossorigin="anonymous">
        <img id="kazetachinuPoster" src="AR Secondary.png" crossorigin="anonymous">

        <!-- VR -->
        <!-- Replace ponyo ? with URL of Apple Vision Pro gif -->
        <!-- Replace ponyoPoster ? with URL of Quest 3 headset -->
        <img id="ponyo" src="VR Pic.png" crossorigin="anonymous">
        <img id="ponyoPoster" src="VR Secondary.gif" crossorigin="anonymous">

        <!-- MR -->
        <img id="karigurashi" src="MR Pic.png" crossorigin="anonymous">
        <img id="karigurashiPoster" src="MR Secondary.png" crossorigin="anonymous">

        <a-mixin id="frame"
          geometry="primitive: plane; width: 0.5783552; height: 0.8192"
          material="color: white; shader: flat"
          animation__scale="property: scale; to: 1.2 1.2 1.2; dur: 200; startEvents: mouseenter"
          animation__scale_reverse="property: scale; to: 1 1 1; dur: 200; startEvents: mouseleave"
        ></a-mixin>

        <a-mixin id="poster"
          geometry="primitive: plane; width: 0.544768; height: 0.786432"
          material="color: white; shader: flat"
          position="0 0 0.005"
        ></a-mixin>

        <a-mixin id="movieImage"
          geometry="primitive: plane; width: 1.5; height: 0.81"
          material="src: #ponyo; shader: flat; transparent: true"
          position="0 0.495 0.002"
        ></a-mixin>
      </a-assets>

      <a-entity id="background"
        geometry="primitive: sphere; radius: 2.0"
        material="color: red; side: back; shader: flat"
        scale="0.001 0.001 0.001"
        visible="false"
        class="raycastable"
      ></a-entity>

      <a-entity position="0 1.6 0" camera look-controls="magicWindowTrackingEnabled: false; touchEnabled: false; mouseEnabled: false">
        <a-entity id="fadeBackground"
          geometry="primitive: sphere; radius: 2.5"
          material="color: black; side: back; shader: flat; transparent: true; opacity: 0.6"
          visible="false"
        ></a-entity>
      </a-entity>

      <!-- LEFT HAND TODO (Student completes) -->
      <!-- instructions preserved exactly -->
      <!-- id="leftHand" -->
      <!-- hand-tracking-controls="hand: left; handModelOpacity: 0.5; handModelStretchFactor: 0.8" -->
      <!-- etcâ€¦ -->

      <!-- RIGHT HAND (Given Example) -->
      <a-entity id="rightHand"
        hand-tracking-controls="hand: right; handModelOpacity: 0.5; handModelStretchFactor: 0.8"
        laser-controls="hand: right"
        raycaster="objects: .raycastable, .AVELAFitBit"
        line="color: #118A7E"
        aabb-collider="objects: .cube, .AVELAFitBit"
        grab
      ></a-entity>

      <!-- Replace the ? position with `0 1.6 -2.5` -->
      <a-entity id="ui" position="0 1.6 -2.5">

        <a-entity id="menu" highlight>
          <a-entity id="karigurashiButton" position="-0.8 0 0" mixin="frame" class="raycastable menu-button">
            <a-entity mixin="poster" material="src: #karigurashiPoster"></a-entity>
          </a-entity>

          <a-entity id="kazetachinuButton" position="0 0 0" mixin="frame" class="raycastable menu-button">
            <a-entity mixin="poster" material="src: #kazetachinuPoster"></a-entity>
          </a-entity>

          <a-entity id="ponyoButton" position="0.8 0 0" mixin="frame" class="raycastable menu-button">
            <a-entity mixin="poster" material="src: #ponyoPoster"></a-entity>
          </a-entity>
        </a-entity>

        <a-entity id="infoPanel"
          position="0 0 0.5"
          info-panel
          visible="false"
          scale="0.001 0.001 0.001"
          geometry="primitive: plane; width: 1.5; height: 1.8"
          material="color: #333333; shader: flat; transparent: false"
          class="raycastable"
        >
          <a-entity id="ponyoMovieImage" mixin="movieImage" material="src: #ponyo" visible="false"></a-entity>
          <a-entity id="kazetachinuMovieImage" mixin="movieImage" material="src: #kazetachinu" visible="false"></a-entity>
          <a-entity id="karigurashiMovieImage" mixin="movieImage" material="src: #karigurashi" visible="false"></a-entity>

          <a-entity id="movieTitle"
            position="-0.68 -0.1 0"
            text="shader: msdf; anchor: left; width: 1.5; font: https://cdn.aframe.io/examples/ui/Viga-Regular.json; color: white; value: Ponyo (2003)"
          ></a-entity>

          <a-entity id="movieDescription"
            position="-0.68 -0.2 0"
            text="baseline: top; shader: msdf; anchor: left; font: https://cdn.aframe.io/examples/ui/Viga-Regular.json; color: white; value: Lorem ipsum dolor sit amet..."
          ></a-entity>

        </a-entity>
      </a-entity>

    </a-scene>
  </body>
</html>
